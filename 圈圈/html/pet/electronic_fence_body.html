<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../css/aui.css" />
		<link rel="stylesheet" type="text/css" href="../../css/font/iconfont.css" />
	</head>
	<body>
		<div style="text-align: center;background-color: rgba(0,0,0,0.0);z-index: 200;position: absolute">
			<img src="../../image/pet/+ss.png" style="width: 90%"/>
		</div>
	</body>
	<script type="text/javascript" src="../../script/AHelper.js"></script>
	<script type="text/javascript" src="../../script/zepto.min.js"></script>
	<script type="text/javascript" src="../../script/hammer.min.js"></script>
	<script type="text/javascript">
		var bMap, userobj = null;
		//加载标记
		/*function mark() {
		api.openFrame({
		name : 'electronic_fence_mark',
		url : 'electronic_fence_mark.html',
		bgColor : 'rgba(0,0,0,0.0)',
		rect : {
		x : 10,
		y : 100,
		w : api.frameWidth,
		h : api.frameHeight
		},
		bounces : false,
		vScrollBarEnabled : false,
		hScrollBarEnabled : false
		});
		}
		*/
		//02、打开地图
		function open() {
			//地理位置
			//H.$com.isdebug('lon=' + lon + 'lat=' + lat);
			bMap.open({
				rect : {
					x : 0,
					y : 0,
					
					w : api.frameWidth,
					h : api.frameHeight
				},
				//	center : {
				//	lon : lons,
				//	lat : lats
				//},
				zoomLevel : 18,
				showUserLocation : true,
				fixedOn : api.frameName,
				fixed : true
			}, function(ret) {
				//if (ret.status) {
				//	get_pet_position();
				//}
			});
		}

		function addImg() {
			bMap.addImg({
				id : 5,
				imgPath : '../../image/pet/+ss.png',
				
				opacity : 0.8
			});
		}

		//05、获取宠物坐标
		/*function get_pet_position() {
		 api.ajax({
		 url : window.deviceserverUrl + '/position/token/' + userobj.token,
		 cache : false,
		 timeout : 15
		 }, function(ret, err) {
		 if (ret) {
		 switch(ret.retCode) {
		 case 1:
		 H.$com.isdebug('宠物位置信息==' + JSON.stringify(ret));
		 //								addAnnotations(ret.retValue);
		 alert(JSON.stringify(ret));
		 addBillboard(ret.retValue[0].lon, ret.retValue[0].lat);
		 break;
		 case 0:
		 break;
		 }
		 } else {
		 api.toast({
		 msg : '抱歉，暂时未获取宠物位置信息'
		 });
		 }
		 });
		 }*/
		Zepto(function($) {
			//01、获取当前用户位置
		});
		H.ready(function() {
			api.getPrefs({
				key : 'userinfo'
			}, function(ret, err) {
				userobj = eval('(' + ret.value + ')');
			});
			api.showProgress({
				title : "定位中"
			});
			bMap = api.require('bMap');
			open();
			//addImg();
			//mark();
			api.hideProgress();
		});
	</script>
</html>