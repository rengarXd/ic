<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<!--确保绘制和缩放的效果需要在<head>标签中添加 viewport 元数据标签-->
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title>圈圈APP</title>
		<!--引入aui框架win-->
		<link rel="stylesheet" href="../css/aui-win.css" />
		<link rel="stylesheet" href="../css/fonts/iconfont.css" />
		<style>
			.display-none {
				display: none;
			}
			.brige {
				display: inline-block;
				position: absolute;
				top: 0;
				left: 51%;
				z-index: 100;
				background: red;
				border-radius: 50%;
				-webkit-border-radius: 50%;
				font-size: 11px;
				height: 16px;
				line-height: 16px;
				text-align: center;
				min-width: 16px;
				color: #fff;
				font-style: normal;
			}
			#aui-footer .aui-iconfont {
				font-size: 25px;
			}
			#aui-footer {
				background: #f7f7f7;
				border-top: 1px solid #e2e2e2;
			}
			.aui-bar-1d9dd5 {
				background: #1786FF;
			}
			#aui-footer li.active-1d9dd5, #aui-footer li.active-1d9dd5 span.aui-iconfont {
				color: #4385f6 !important;
			}
			.icon-size {
				font-size: 26px
			}
			#index_massage span:active {
				color: #34495E
			}
		</style>
	</head>
	<body>
		<!--标题栏 start-->
		<header class="aui-bar aui-bar-nav aui-bar-1d9dd5 header" id='index-header'>
			<div class="aui-title">
				圈圈
			</div>
			<a class="aui-pull-right" id="index_massage"> <span class="aui-iconfont aui-icon-message"></span> </a>
		</header>
		<header class="aui-bar aui-bar-nav aui-bar-1d9dd5 display-none header" id='pet-header' style="background: #1786FF">
			<div class="aui-title" style="font-size: 12px;">
				硬件ID在线  电量56%
			</div>
		</header>
		<header class="aui-bar aui-bar-nav aui-bar-1d9dd5 display-none header" id='friend-header'>
			<div class="aui-title">
				友邻
			</div>
		</header>
		<header class="aui-bar aui-bar-nav aui-bar-1d9dd5 display-none header" id='shop-header'>
			<div class="aui-title">
				市场
			</div>
		</header>
		<header class="aui-bar aui-bar-nav aui-bar-1d9dd5 display-none header" id='me-header'>
			<div class="aui-title">
				我的
			</div>
			<a class="aui-pull-right" tapmode onclick="H.$openWin('ucenter_setting_head','./me/ucenter_setting_head.html');"> <span class="iconfont icon-iconsetup"></span> </a>
		</header>
		<!--标题栏 end-->
		<footer class="aui-nav" id="aui-footer">
			<ul class="aui-bar-tab">
				<li class="active-1d9dd5" data-header="index-header" data-frameName="index" tapmode>
					<span class="aui-iconfont iconfont icon-iocnshangpinliebiao"></span>
					<p>
						首页
					</p>
				</li>
				<li data-header="pet-header" data-frameName="pet" tapmode>
					<span class="aui-iconfont iconfont icon-iocnshangpinliebiao"></span>
					<p>
						宠物
					</p>
				</li>
				<li data-header="friend-header" data-frameName="friend" tapmode>
					<span class="aui-iconfont iconfont icon-iocnshangpinliebiao"></span>
					<p>
						友邻
					</p>
					<!--消息样式-->
					<em class="brige" id="brige">8</em>
					<!--消息样式-->
				</li>
				<li data-header="shop-header" data-frameName="shop" tapmode>
					<span class="aui-iconfont iconfont icon-iocnshangpinliebiao"></span>
					<p>
						市场
					</p>
				</li>
				<li data-header="me-header" data-frameName="me" tapmode>
					<span class="aui-iconfont iconfont icon-iocnshangpinliebiao"></span>
					<p>
						我的
					</p>
				</li>
			</ul>
		</footer>
	</body>
	<!--封装了APICloud大量常用的类库，内置了DOM操作，模板引擎，表单验证等常用类库-->
	<script type="text/javascript" src="../script/AHelper.js"></script>
	<script type="text/javascript" src="../script/zepto.min.js"></script>
	<script type="text/javascript">
		//设置数组
		var frames = [];
		// 显示指定frame
		function showFrame(frameName) {
			$("#aui-footer li").each(function() {
				var fName = $(this).attr("data-frameName");
				if (fName != frameName) {
					H.$setFrameStatus(fName, true);
				} else {
					H.$setFrameStatus(fName, false);
				}
			});
		}

		Zepto(function($) {
			$("#aui-footer").on("tap", "li", function() {
				var that = $(this);
				var headerId = that.attr("data-header");
				var frameName = that.attr("data-frameName");
				that.addClass("active-1d9dd5").siblings("#aui-footer li").removeClass("active-1d9dd5");
				$("#" + headerId).removeClass("display-none").siblings(".header").addClass("display-none");
				showFrame(frameName);
				if (frames.indexOf(frameName) == -1) {
					frames.push(frameName);
					// 打开新的frame
					H.$openFrameWithNav(headerId, {
						url : frameName + "/" + frameName + "_body.html",
						name : frameName,
						bounces : false
					}, 'aui-footer');
				}
			});
			$("#index_massage").on('click', function() {
				H.$openWin('massage_header', 'index/massage_header.html');
			});
		});
		//所有的代码都写在H.ready(function(){})
		H.ready(function() {
			api.setStatusBarStyle({
				style : 'light',
				color : '#ffffff'
			});
			frames.push('contact');
			// 打开新的frame
			H.$openFrameWithNav('index-header', {
				url : 'index/index' + "_body.html",
				name : 'index',
				bounces : true
			}, 'aui-footer');
			// 断开网络
			H.$addEventListener(function(ret, err) {
				H.$toast('已断开网络');
			}, 'offline');
			// 连接网络
			H.$addEventListener(function(ret, err) {
				H.$toast('已连接上网络');
			}, 'online');
			H.$dblclickToCloseApp(function() {
				//双击退出的时候执行的操作
			});
		});
	</script>
</html>