<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title>我的待收货订单body</title>
		<link rel="stylesheet" type="text/css" href="../../css/aui.css" />
		<link rel="stylesheet" type="text/css" href="../../css/fonts/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="../../css/tools/loading.css"/>
		<style>
			.aui-list-view-cell {
				font-size: 14px;
			}
			.aui-col-xs-12 {
				display: inline-block;
			}
			.ic_status {
				color: #f50 !important;
				font-weight: 800;
			}
			.ic_price {
				color: #F10F0F !important;
				font-size: 15px;
				font-weight: 800;
			}
			.ic_type {
				color: #0DA73E !important
			}
		</style>
	</head>
	<body>
		<div class="aui-content" id="order_data_body" style="padding-top: 10px;">
			<!--页面加载中-->
			<div style="text-align: center" id="ic_loading"><img src="../../image/loading.png" width="70" height="70" />
				<br />
				<span>加载中...</span>
			</div>
			<!--页面加载中-->
		</div>
		<script id="order_data" type="text/html">
			<ul class="aui-list-view" >
			{{# for(var i = 0, len = d.retValue.length; i < len; i++){ }}
			<li class="aui-list-view-cell" onclick="openShop({{ d.retValue[i].id }});">
			<div class="aui-col-xs-12">
			<span class="aui-pull-left">
			<span class="iconfont icon-dingdan"></span> 订单编号：{{ d.retValue[i].order_no }}
			</span><span class="aui-pull-right ic_status">{{# if(d.retValue[i].status==5){ }}完成订单{{# }else if(d.retValue[i].status==2){ }}等待发货{{# } }}</span>
			</div>
			<div class="aui-col-xs-12">
			<span class="aui-pull-left">
			日期：{{ d.retValue[i].create_time }}
			</span><span class="aui-pull-right ic_price">￥{{ d.retValue[i].order_amount }}</span>
			</div>
			<div class="aui-col-xs-12">
			<span class="aui-pull-left">
			收货人：{{ d.retValue[i].accept_name }}
			</span><span class="aui-pull-right aui-text-blue">{{# if(d.retValue[i].pay_type==1){ }}预存款{{# }else if(d.retValue[i].pay_type==11){ }}支付宝{{# } }}</span>
			</div>
			</li>
			{{# } }}
			</ul>
		</script>
	</body>
	<script type="text/javascript" src="../../script/AHelper.js"></script>
	<script type="text/javascript" src="../../script/zepto.min.js"></script>
	<script type="text/javascript" src="../../script/laytpl.js"></script>
	<script type="text/javascript">
		var userobj = null;
		Zepto(function($) {
		});
		//跳转到订单详情页
		function openShop(id) {
			H.$openWin("shop_order_detail_header", "../shop/shop_order_detail_header.html", {
				ordersId : id
			});
		}
		
		H.ready(function() {
			api.getPrefs({
				key : 'userinfo'
			}, function(ret, err) {
				userobj = eval('(' + ret.value + ')');
				api.ajax({
					//1、请求所有订单 type = 1
					url : window.serverUrl + '/me_all_order/user_id/' + userobj.id + '/token/' + userobj.token + '/type/4'
				}, function(ret, err) {
					if (ret && ret.retCode == 1) {
						//2、如果有数据
						if (ret.retValue.length > 0) {
							var tpl = document.getElementById('order_data').innerHTML;
							laytpl(tpl).render(ret, function(render) {
								document.getElementById('order_data_body').innerHTML = render;
							});
						} else {
							//2.1、如果无数据
							$("#ic_loading span").text('抱歉暂无数据');
						}
					} else {
						$("#ic_loading span").text('抱歉暂无数据');
					}
				});
			});
		});
	</script>
</html>